; Generated by Helix Python Compiler
.ORG 0x0000
LDI.W SP, 0x6000 ; Initialize Stack
CALL main
HLT

; Function: add
add:
ADD.W SP, SP, -1
ST.W FP, [SP, 0]
MOV.W FP, SP
ADD.W SP, SP, -1
ST.W R1, [SP, 0] ; Arg a
ADD.W SP, SP, -1
ST.W R2, [SP, 0] ; Arg b
LD.W R1, [FP, -1] ; Load a
ADD.W SP, SP, -1
ST.W R1, [SP, 0]
LD.W R1, [FP, -2] ; Load b
MOV.W R2, R1
LD.W R1, [SP, 0]
ADD.W SP, SP, 1
ADD.W R1, R1, R2
MOV.W SP, FP
LD.W FP, [SP, 0]
ADD.W SP, SP, 1
RET
MOV.W SP, FP
LD.W FP, [SP, 0]
ADD.W SP, SP, 1
RET

; Function: main
main:
ADD.W SP, SP, -1
ST.W FP, [SP, 0]
MOV.W FP, SP
LDI.W R1, 10
ADD.W SP, SP, -1
ST.W R1, [SP, 0]
LDI.W R1, 20
ADD.W SP, SP, -1
ST.W R1, [SP, 0]
LD.W R2, [SP, 0]
ADD.W SP, SP, 1
LD.W R1, [SP, 0]
ADD.W SP, SP, 1
CALL add
MOV.W SP, FP
LD.W FP, [SP, 0]
ADD.W SP, SP, 1
RET
MOV.W SP, FP
LD.W FP, [SP, 0]
ADD.W SP, SP, 1
RET
