; Test Runtime Library
.section .text
.global main
.global _memcpy
.global _memset

main:
    ; Test _memset
    ; Fill 10 words at 0x2000 with value 5
    ldi.w r1 8192      ; 0x2000
    ldi.w r2 5
    ldi.w r3 10
    call _memset
    
    ; Verify _memset (Load 0x2005, should be 5)
    ldi.w r1 8197
    ld.w r4 [r1]
    ldi.w r5 5
    cmp.w r4 r5
    bne error
    
    ; Test _memcpy
    ; Copy 10 words from 0x2000 to 0x3000
    ldi.w r1 12288     ; 0x3000 (Dest)
    ldi.w r2 8192      ; 0x2000 (Src)
    ldi.w r3 10        ; Count
    call _memcpy
    
    ; Verify _memcpy (Load 0x3005, should be 5)
    ldi.w r1 12293
    ld.w r4 [r1]
    cmp.w r4 r5
    bne error
    
    ; Success
    ldi.w r1 111
    hlt

error:
    ldi.w r1 666
    hlt
