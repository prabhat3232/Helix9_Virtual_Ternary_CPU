; Generated by Helix Python Compiler
.ORG 0x0000
LDI.W SP, 0x6000 ; Initialize Stack
CALL __init_globals
CALL main
HLT

; Function: main
main:
ADD.W SP, SP, -1
ST.W FP, [SP, 0]
MOV.W FP, SP
ADD.W SP, SP, -1
ST.W R14, [SP, 0]
LDI.W R1, 0
CALL __print_int
LDI.W R1, 123
CALL __print_int
LDI.W R1, -99
CALL __print_int
LDI.W R1, 42
ADD.W SP, SP, -1 ; Alloc x
ST.W R1, [FP, -2] ; x = R1
LD.W R1, [FP, -2]
CALL __print_int
LDI.W R1, 10
LDI.W R2, -1
MUL.W R1, R1, R2
ADD.W SP, SP, -1 ; Alloc y
ST.W R1, [FP, -3] ; y = R1
LD.W R1, [FP, -3]
CALL __print_int
LDI.W R1, 0
ADD.W SP, SP, -1 ; Alloc i
ST.W R1, [FP, -4] ; i = R1
L_while_start_1:
LD.W R1, [FP, -4] ; Load i
ADD.W SP, SP, -1
ST.W R1, [SP, 0]
LDI.W R1, 3
MOV.W R2, R1
LD.W R1, [SP, 0]
ADD.W SP, SP, 1
CMP.W R1, R2
BLT L_cmp_true_3
LDI.W R1, 0
JMP L_cmp_end_4
L_cmp_true_3:
LDI.W R1, 1
L_cmp_end_4:
CMP.W R1, 0
BEQ L_while_end_2
LD.W R1, [FP, -4]
CALL __print_int
LD.W R1, [FP, -4] ; Load i
ADD.W SP, SP, -1
ST.W R1, [SP, 0]
LDI.W R1, 1
MOV.W R2, R1
LD.W R1, [SP, 0]
ADD.W SP, SP, 1
ADD.W R1, R1, R2
ST.W R1, [FP, -4] ; i = R1
JMP L_while_start_1
L_while_end_2:
MOV.W SP, FP
ADD.W SP, SP, -1
LD.W R14, [SP, 0]
ADD.W SP, SP, 1
LD.W FP, [SP, 0]
ADD.W SP, SP, 1
RET
; --- Global Initialization ---
__init_globals:
ADD.W SP, SP, -1
ST.W R14, [SP, 0]
LD.W R14, [SP, 0]
ADD.W SP, SP, 1
RET
; --- Helper: Print Integer (R1) ---
__print_int:
ADD.W SP, SP, -1
ST.W R14, [SP, 0]
ADD.W SP, SP, -1
ST.W R4, [SP, 0]
CMP.W R1, 0
BNE L_check_neg_5
LDI.W R2, 16384
ADD.W R2, R2, R2
LDI.W R1, 48
ST.W R1, [R2, 0]
JMP L_print_int_ret_6
L_check_neg_5:
LDI.W R2, 0
CMP.W R1, R2
BGT L_print_pos_7
ADD.W SP, SP, -1
ST.W R1, [SP, 0]
LDI.W R2, 16384
ADD.W R2, R2, R2
LDI.W R1, 45
ST.W R1, [R2, 0]
LD.W R1, [SP, 0]
ADD.W SP, SP, 1
LDI.W R2, -1
MUL.W R1, R1, R2
L_print_pos_7:
LDI.W R4, 0
L_print_int_mod_8:
MOV.W R3, R1
LDI.W R2, 10
MOD.W R3, R3, R2
ADD.W SP, SP, -1
ST.W R3, [SP, 0]
LDI.W R2, 1
ADD.W R4, R4, R2
LDI.W R2, 10
DIV.W R1, R1, R2
CMP.W R1, 0
BNE L_print_int_mod_8
L_print_int_out_9:
LD.W R1, [SP, 0]
ADD.W SP, SP, 1
LDI.W R2, 48
ADD.W R1, R1, R2
LDI.W R2, 16384
ADD.W R2, R2, R2
ST.W R1, [R2, 0]
LDI.W R2, -1
ADD.W R4, R4, R2
CMP.W R4, 0
BNE L_print_int_out_9
L_print_int_ret_6:
LDI.W R2, 16384
ADD.W R2, R2, R2
LDI.W R1, 10
ST.W R1, [R2, 0]
LD.W R4, [SP, 0]
ADD.W SP, SP, 1
LD.W R14, [SP, 0]
ADD.W SP, SP, 1
RET
