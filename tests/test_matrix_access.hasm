; Generated by Helix Python Compiler
.ORG 0x0000
LDI.W SP, 0x6000 ; Initialize Stack
CALL __init_globals
CALL main
HLT
; --- Main ---
main:
ADD.W SP, SP, -1
ST.W FP, [SP, 0]
MOV.W FP, SP
ADD.W SP, SP, -1
ST.W R14, [SP, 0]
; Declared Matrix A [2x2] at .DAT 8192
; Declared Matrix A [2x2] at .DAT 8192
LDI.W R1, 1
ADD.W SP, SP, -1
ST.W R1, [SP, 0]
LDI.W R1, 1
MOV.W R4, R1
LD.W R3, [SP, 0]
ADD.W SP, SP, 1
MOV.W R5, R3
LDI.W R2, 2
MUL.W R5, R5, R2
ADD.W R5, R5, R4
LDI.W R6, 8192
ADD.W R6, R6, R5
LD.W R1, [R6, 0]
ADD.W SP, SP, -1 ; Alloc x
ST.W R1, [FP, -2] ; x = R1
LDI.W R1, 0
ADD.W SP, SP, -1
ST.W R1, [SP, 0]
LDI.W R1, 0
MOV.W R4, R1
LD.W R3, [SP, 0]
ADD.W SP, SP, 1
MOV.W R5, R3
LDI.W R2, 2
MUL.W R5, R5, R2
ADD.W R5, R5, R4
LDI.W R6, 8192
ADD.W R6, R6, R5
LD.W R1, [R6, 0]
ADD.W SP, SP, -1 ; Alloc y
ST.W R1, [FP, -3] ; y = R1
LD.W R1, [FP, -2] ; Load x
ADD.W SP, SP, -1
ST.W R1, [SP, 0]
LD.W R1, [FP, -3] ; Load y
MOV.W R2, R1
LD.W R1, [SP, 0]
ADD.W SP, SP, 1
ADD.W R1, R1, R2
ADD.W SP, SP, -1 ; Alloc z
ST.W R1, [FP, -4] ; z = R1
LD.W R1, [FP, -4]
CALL __print_int
LDI.W R2, 16384
ADD.W R2, R2, R2
LDI.W R1, 10
ST.W R1, [R2, 0]
LDI.W R1, 80
ADD.W SP, SP, -1
ST.W R1, [SP, 0]
LDI.W R1, 0
ADD.W SP, SP, -1
ST.W R1, [SP, 0]
LDI.W R1, 1
MOV.W R4, R1
LD.W R3, [SP, 0]
ADD.W SP, SP, 1
MOV.W R5, R3
LDI.W R2, 2
MUL.W R5, R5, R2
ADD.W R5, R5, R4
LDI.W R6, 8192
ADD.W R6, R6, R5
LD.W R1, [SP, 0]
ADD.W SP, SP, 1
ST.W R1, [R6, 0]
LDI.W R1, 0
ADD.W SP, SP, -1
ST.W R1, [SP, 0]
LDI.W R1, 1
MOV.W R4, R1
LD.W R3, [SP, 0]
ADD.W SP, SP, 1
MOV.W R5, R3
LDI.W R2, 2
MUL.W R5, R5, R2
ADD.W R5, R5, R4
LDI.W R6, 8192
ADD.W R6, R6, R5
LD.W R1, [R6, 0]
ADD.W SP, SP, -1 ; Alloc val
ST.W R1, [FP, -5] ; val = R1
LD.W R1, [FP, -5]
CALL __print_int
LDI.W R2, 16384
ADD.W R2, R2, R2
LDI.W R1, 10
ST.W R1, [R2, 0]
LD.W R1, [FP, -2] ; Load x
ADD.W SP, SP, -1
ST.W R1, [SP, 0]
LD.W R1, [FP, -3] ; Load y
MOV.W R2, R1
LD.W R1, [SP, 0]
ADD.W SP, SP, 1
ADD.W R1, R1, R2
ADD.W SP, SP, -1
ST.W R1, [SP, 0]
LDI.W R1, 49
MOV.W R2, R1
LD.W R1, [SP, 0]
ADD.W SP, SP, 1
ADD.W R1, R1, R2
ADD.W SP, SP, -1
ST.W R1, [SP, 0]
LDI.W R1, 1
ADD.W SP, SP, -1
ST.W R1, [SP, 0]
LDI.W R1, 0
MOV.W R4, R1
LD.W R3, [SP, 0]
ADD.W SP, SP, 1
MOV.W R5, R3
LDI.W R2, 2
MUL.W R5, R5, R2
ADD.W R5, R5, R4
LDI.W R6, 8192
ADD.W R6, R6, R5
LD.W R1, [SP, 0]
ADD.W SP, SP, 1
ST.W R1, [R6, 0]
LDI.W R1, 1
ADD.W SP, SP, -1
ST.W R1, [SP, 0]
LDI.W R1, 0
MOV.W R4, R1
LD.W R3, [SP, 0]
ADD.W SP, SP, 1
MOV.W R5, R3
LDI.W R2, 2
MUL.W R5, R5, R2
ADD.W R5, R5, R4
LDI.W R6, 8192
ADD.W R6, R6, R5
LD.W R1, [R6, 0]
CALL __print_int
LDI.W R2, 16384
ADD.W R2, R2, R2
LDI.W R1, 10
ST.W R1, [R2, 0]
MOV.W SP, FP
ADD.W SP, SP, -1
LD.W R14, [SP, 0]
ADD.W SP, SP, 1
LD.W FP, [SP, 0]
ADD.W SP, SP, 1
RET
; --- Global Initialization ---
__init_globals:
ADD.W SP, SP, -1
ST.W R14, [SP, 0]
; Init Matrix Data at 8192 (Len=4)
LDI.W R6, 8192
LDI.W R1, 10
ST.W R1, [R6, 0]
LDI.W R2, 1
ADD.W R6, R6, R2
LDI.W R1, 20
ST.W R1, [R6, 0]
LDI.W R2, 1
ADD.W R6, R6, R2
LDI.W R1, 30
ST.W R1, [R6, 0]
LDI.W R2, 1
ADD.W R6, R6, R2
LDI.W R1, 40
ST.W R1, [R6, 0]
LD.W R14, [SP, 0]
ADD.W SP, SP, 1
RET
; --- Helper: Print Integer (R1) ---
__print_int:
ADD.W SP, SP, -1
ST.W R14, [SP, 0]
ADD.W SP, SP, -1
ST.W R4, [SP, 0]
CMP.W R1, 0
BNE L_check_neg_1
LDI.W R2, 16384
ADD.W R2, R2, R2
LDI.W R1, 48
ST.W R1, [R2, 0]
JMP L_print_int_ret_2
L_check_neg_1:
LDI.W R2, 0
CMP.W R1, R2
BGT L_print_pos_3
ADD.W SP, SP, -1
ST.W R1, [SP, 0]
LDI.W R2, 16384
ADD.W R2, R2, R2
LDI.W R1, 45
ST.W R1, [R2, 0]
LD.W R1, [SP, 0]
ADD.W SP, SP, 1
LDI.W R2, -1
MUL.W R1, R1, R2
L_print_pos_3:
LDI.W R4, 0
L_print_int_mod_4:
MOV.W R3, R1
LDI.W R2, 10
MOD.W R3, R3, R2
ADD.W SP, SP, -1
ST.W R3, [SP, 0]
LDI.W R2, 1
ADD.W R4, R4, R2
LDI.W R2, 10
DIV.W R1, R1, R2
CMP.W R1, 0
BNE L_print_int_mod_4
L_print_int_out_5:
LD.W R1, [SP, 0]
ADD.W SP, SP, 1
LDI.W R2, 48
ADD.W R1, R1, R2
LDI.W R2, 16384
ADD.W R2, R2, R2
ST.W R1, [R2, 0]
LDI.W R2, -1
ADD.W R4, R4, R2
CMP.W R4, 0
BNE L_print_int_out_5
L_print_int_ret_2:
LD.W R4, [SP, 0]
ADD.W SP, SP, 1
LD.W R14, [SP, 0]
ADD.W SP, SP, 1
RET
